# ==========================================
# 目标机型设置 (CMCC RAX3000M)
# ==========================================
CONFIG_TARGET_mediatek=y
CONFIG_TARGET_mediatek_filogic=y
CONFIG_TARGET_mediatek_filogic_DEVICE_cmcc_rax3000m=y

# 开启编译缓存
CONFIG_CCACHE=y

# ==========================================
# 关键策略：不手动设置内核/驱动选项
# ==========================================
# 我们不写 CONFIG_MTK_... 也不写 CONFIG_PACKAGE_kmod-nf-flow...
# 源码中的 target profile 会自动启用 RAX3000M 所需的正确驱动组合。
# 任何手动的干预都可能导致依赖链断裂。

# ==========================================
# LuCI 基础
# ==========================================
CONFIG_PACKAGE_luci=y
CONFIG_LUCI_LANG_zh_cn=y
CONFIG_PACKAGE_luci-i18n-base-zh-cn=y
CONFIG_PACKAGE_luci-theme-argon=y
CONFIG_PACKAGE_luci-app-argon-config=y
CONFIG_PACKAGE_luci-i18n-argon-config-zh-cn=y

# ==========================================
# 科学上网 (Passwall Rust版)
# ==========================================
CONFIG_PACKAGE_luci-app-passwall=y
CONFIG_PACKAGE_luci-i18n-passwall-zh-cn=y
CONFIG_PACKAGE_xray-core=y
CONFIG_PACKAGE_sing-box=y
CONFIG_PACKAGE_chinadns-ng=y
CONFIG_PACKAGE_haproxy=y
CONFIG_PACKAGE_v2ray-plugin=y
CONFIG_PACKAGE_shadowsocks-rust-sslocal=y

# ==========================================
# 流量整形 (SQM)
# ==========================================
# SQM 依然保留。刷机后，默认硬件加速是开启的。
# 如果要用 SQM，请在后台系统设置里关闭“硬件流量分载”。
CONFIG_PACKAGE_luci-app-sqm=y
CONFIG_PACKAGE_luci-i18n-sqm-zh-cn=y
CONFIG_PACKAGE_kmod-sched-cake=y
CONFIG_PACKAGE_kmod-sched-fq_codel=y

# ==========================================
# ⚠️ 移除 TurboACC 以修复编译冲突 ⚠️
# ==========================================
# TurboACC 的 SFE 模块经常破坏 MTK 的驱动依赖
# 暂时禁用它以确保固件能编译出来
# CONFIG_PACKAGE_luci-app-turboacc is not set

# ==========================================
# 实用功能 (统计/文件/其他)
# ==========================================
CONFIG_PACKAGE_luci-app-statistics=y
CONFIG_PACKAGE_luci-i18n-statistics-zh-cn=y
CONFIG_PACKAGE_collectd=y
CONFIG_PACKAGE_collectd-mod-cpu=y
CONFIG_PACKAGE_collectd-mod-interface=y
CONFIG_PACKAGE_collectd-mod-memory=y
CONFIG_PACKAGE_collectd-mod-network=y
CONFIG_PACKAGE_collectd-mod-thermal=y

CONFIG_PACKAGE_luci-app-vnstat2=y
CONFIG_PACKAGE_luci-i18n-vnstat2-zh-cn=y
CONFIG_PACKAGE_vnstati2=y

CONFIG_PACKAGE_luci-app-package-manager=y
CONFIG_PACKAGE_luci-i18n-package-manager-zh-cn=y

CONFIG_PACKAGE_luci-app-diskman=y
CONFIG_PACKAGE_luci-i18n-diskman-zh-cn=y
CONFIG_PACKAGE_luci-app-samba4=y
CONFIG_PACKAGE_luci-i18n-samba4-zh-cn=y
CONFIG_PACKAGE_autosamba=y

CONFIG_PACKAGE_luci-app-nlbwmon=y
CONFIG_PACKAGE_luci-i18n-nlbwmon-zh-cn=y
CONFIG_PACKAGE_luci-app-frpc=y
CONFIG_PACKAGE_luci-i18n-frpc-zh-cn=y
CONFIG_PACKAGE_luci-app-wol=y
CONFIG_PACKAGE_luci-i18n-wol-zh-cn=y
CONFIG_PACKAGE_etherwake=y
CONFIG_PACKAGE_luci-app-autoreboot=y
CONFIG_PACKAGE_luci-i18n-autoreboot-zh-cn=y
CONFIG_PACKAGE_luci-app-ttyd=y
CONFIG_PACKAGE_luci-i18n-ttyd-zh-cn=y
CONFIG_PACKAGE_luci-app-upnp=y
CONFIG_PACKAGE_luci-i18n-upnp-zh-cn=y

# ==========================================
# USB 支持 (保持默认即可，无需手动指定内核模块)
# ==========================================
# 只要勾选了应用(如 samba/diskman)，依赖的 kmod 会自动被选中
CONFIG_PACKAGE_kmod-usb-storage=y
CONFIG_PACKAGE_kmod-usb-storage-uas=y
CONFIG_PACKAGE_kmod-fs-ext4=y
CONFIG_PACKAGE_kmod-fs-exfat=y
CONFIG_PACKAGE_kmod-fs-ntfs3=y
CONFIG_PACKAGE_kmod-usb-net=y
CONFIG_PACKAGE_kmod-usb-net-rndis=y
CONFIG_PACKAGE_kmod-usb-net-cdc-ncm=y
CONFIG_PACKAGE_kmod-usb-net-cdc-ether=y

# ==========================================
# 工具
# ==========================================
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_wget-ssl=y
CONFIG_PACKAGE_htop=y
CONFIG_PACKAGE_nano=y
CONFIG_PACKAGE_bsdtar=y
CONFIG_PACKAGE_unzip=y
CONFIG_PACKAGE_tcping=y
CONFIG_PACKAGE_wpad-openssl=y
